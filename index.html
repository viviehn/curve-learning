<html>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script type="text/javascript" src="directory.json"></script>
  <body>
    <div class="container-fluid" style="padding-top:20px" id="main">
      <h2>2021-11-03</h2>
        <p>Compare to final image of all lines</p>
      <div class="row">
        <div class="col">
          <video width="100%" style="border:1px solid #000;" controls>
              <source src="20211103/compare_to_final.mp4" type="video/mp4">
          </video>
        </div>
        <div class="col">
          <img width="100%" src="20211103/compare_to_final0020.png">
        </div>
        <div class="col">
          <img width="100%" src="20211103/compare_to_final0040.png">
        </div>
        <div class="col">
          <img width="100%" src="20211103/compare_to_final0060.png">
        </div>
      </div>
        <p>Compare to prev image at each iter</p>
      <div class="row">
        <div class="col">
          <video width="100%" style="border:1px solid #000;" controls>
              <source src="20211103/compare_to_prev.mp4" type="video/mp4">
          </video>
        </div>
        <div class="col">
          <img width="100%" src="20211103/compare_to_prev0020.png">
        </div>
        <div class="col">
          <img width="100%" src="20211103/compare_to_prev0040.png">
        </div>
        <div class="col">
          <img width="100%" src="20211103/compare_to_prev0060.png">
        </div>
      </div>
        <p>Compare to prev image at each iter, merge added stroke to an existing one if possible</p>
      <div class="row">
        <div class="col">
          <video width="100%" style="border:1px solid #000;" controls>
              <source src="20211103/compare_to_prev_merge.mp4" type="video/mp4">
          </video>
        </div>
        <div class="col">
          <img width="100%" src="20211103/compare_to_prev_merge0020.png">
        </div>
        <div class="col">
          <img width="100%" src="20211103/compare_to_prev_merge0040.png">
        </div>
        <div class="col">
          <img width="100%" src="20211103/compare_to_prev_merge0060.png">
        </div>
      </div>

      <p>Other things</p>
      <div class="row">
        <div class="col">
          <img width="100%" src="20211103/toomanypts.png">
        </div>
        <div class="col">
          <img width="100%" src="20211103/toomanycurves.png">
        </div>
        <div class="col">
          <img width="100%" src="20211103/wiggle.png">
        </div>
        <div class="col">
          <img width="100%" src="20211103/5pts.png">
        </div>
      </div>
      <p>Some general thoughts/comments: </p>
      <p>Most(basically all) other simplification works start with all the curves and remove them, and don't modify the curves (either points or topology). Building up the drawing allows us to potentially do all of those</p>
      <p>Currently working with very very brute force, iterative, and greedy methods. Currently focus on getting good (simple, good topology, few points per curve, etc) drawings, then later we can think about acceleration/optimization/learning when to stop/style?</p>
      <br>
      <hr>
      <h2>2021-10-27</h2>
      <div class="row">
        <div class="col">
          <p>Car iterative</p>
          <video width="100%" style="border:1px solid #000;" controls>
              <source src="20211027/car.mp4" type="video/mp4">
          </video>
        </div>
        <div class="col">
          <p>Car compute once</p>
          <video width="100%" style="border:1px solid #000;" controls>
              <source src="20211027/car_compute_once.mp4" type="video/mp4">
          </video>
        </div>
        <div class="col">
          <p>Car blur and ridge detection</p>
          <video width="100%" style="border:1px solid #000;" controls>
              <source src="20211027/car_blur.mp4" type="video/mp4">
          </video>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <p>Monster</p>
          <video width="100%" style="border:1px solid #000;" controls>
              <source src="20211027/monster.mp4" type="video/mp4">
          </video>
        </div>
        <div class="col">
          <p>Santa</p>
          <video width="100%" style="border:1px solid #000;" controls>
              <source src="20211027/santa.mp4" type="video/mp4">
          </video>
        </div>
        <div class="col">
          <p>Snow leopard</p>
          <video width="100%" style="border:1px solid #000;" controls>
              <source src="20211027/snowleopard.mp4" type="video/mp4">
          </video>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <p>Spacecraft</p>
          <video width="100%" style="border:1px solid #000;" controls>
              <source src="20211027/spacecraft.mp4" type="video/mp4">
          </video>
        </div>
        <div class="col">
          <p>Spider</p>
          <video width="100%" style="border:1px solid #000;" controls>
              <source src="20211027/spider.mp4" type="video/mp4">
          </video>
        </div>
        <div class="col">
          <p>Sports person</p>
          <video width="100%" style="border:1px solid #000;" controls>
              <source src="20211027/sportsperson.mp4" type="video/mp4">
          </video>
        </div>
      </div>
      <br>
        <p>Using Neural Ranking Module from Neural Contours</p>
      <div class="row">
        <div class="col">
          <img width="100%" src="20211027/car_nrm.png">
        </div>
        <div class="col">
          <img width="100%" src="20211027/spider_nrm.png">
        </div>
        <div class="col">
          <img width="100%" src="20211027/monster_nrm.png">
        </div>
      </div>
      <div class="row">
        <div class="col">
          <img width="100%" src="20211027/car_00.png">
        </div>
        <div class="col">
          <img width="100%" src="20211027/car_01.png">
        </div>
        <div class="col">
          <img width="100%" src="20211027/car_02.png">
        </div>
      </div>
      <div class="row">
        <div class="col">
          <img width="100%" src="20211027/car_03.png">
        </div>
        <div class="col">
          <img width="100%" src="20211027/car_04.png">
        </div>
        <div class="col">
          <img width="100%" src="20211027/car_05.png">
        </div>
      </div>
      <div class="row">
        <div class="col">
          <img width="100%" src="20211027/car_06.png">
        </div>
        <div class="col">
          <img width="100%" src="20211027/car_07.png">
        </div>
        <div class="col">
          <img width="100%" src="20211027/car_08.png">
        </div>
      </div>
      <div class="row">
        <div class="col">
          <img width="100%" src="20211027/car_0204.png">
        </div>
        <div class="col">
          <img width="100%" src="20211027/car_blur_ridge_0041.png">
        </div>
      </div>
      <div class="row">
        <div class="col">
          <img width="100%" src="20211027/monster_00.png">
        </div></div>
<!--

 <div class="row">
  <div class="col-md-4">
    <div class="thumbnail">
        <img src="images/toy-sketch.png" alt="toy sketch" style="width:100%">
    </div>
  </div>
  <div class="col-md-4">
    <div class="thumbnail">
        <img src="images/bigguy.png" alt="big guy" style="width:100%">
    </div>
  </div>
  <div class="col-md-4">
    <div class="thumbnail">
        <img src="images/bunny.png" alt="bunny" style="width:100%">
    </div>
  </div>
</div>
    </div>
    <script>
      function readTextFile(file)
      {
          var rawFile = new XMLHttpRequest();
          var allText = null;
          rawFile.open("GET", file, false);
          rawFile.onreadystatechange = function ()
          {
              if(rawFile.readyState === 4)
              {
                  if(rawFile.status === 200 || rawFile.status == 0)
                  {
                      allText = rawFile.responseText;
                  }
              }
          }
          rawFile.send(null);
          return allText;
      }
      function playVid(videoClass) {
        var videos = document.getElementsByClassName(videoClass);
        for (let vid of videos) {
          vid.loop = true;
          vid.play();
        }
      }

      function pauseVid(videoClass) {
        var videos = document.getElementsByClassName(videoClass);
        for (let vid of videos) {
          vid.pause();
        }
      }

var htmlString = '<div class="row"><div class="d-none d-xl-block col-xl-2 bd-toc" style="position:sticky">';
      htmlString += `<ul class="section-nav" style="list-style:none;font-family:monospace">`;
      var directories = JSON.parse(readTextFile('directory.json'));
      for (let entry of directories) {
        htmlString += `<li class="toc-entry toc-h2"><a href="#${entry.date}">${entry.date}</a></li>`
      }
      htmlString += "</ul></div>";
      htmlString += '<div class="col-xl-10">';
      (async () => {
      for (let entry of directories) {
        htmlString += `<h1 id=${entry.date}>${entry.date}</h1>`;
        htmlString += '<div class="row">';
        htmlString += `<div class="col-sm"><h3>${entry.exp}</h3>`;
        htmlString += `<p>${entry.desc}</p></div>`;
        htmlString += `<div class="col-sm"><a class="btn btn-outline-primary" role="button" aria-pressed="true" onclick="playVid('${entry.date}-${entry.dir}');">Play Videos</a>   `;
        htmlString += `<a class="btn btn-outline-warning" role="button" aria-pressed="true" onclick="pauseVid('${entry.date}-${entry.dir}');">Pause Videos</a>   `;
        htmlString += `<a class="btn btn-outline-secondary" data-toggle="collapse" href="#${entry.date}-${entry.dir}" role="button" aria-expanded="false" aria-controls="${entry.date}-${entry.dir}">Toggle</a></div>`
        htmlString += "</div>";


        var response = await fetch(`https://api.github.com/repos/viviehn/curve-learning/contents/${entry.date}/${entry.dir}`);
        var data = await response.json();
        htmlString += `<div class="collapse" id="${entry.date}-${entry.dir}"><div class="card card-body"><ul>`;
        for (let file of data) {
          if (file.name.split('.').pop() == 'mp4') {
            htmlString += `<video width="320" height="240" class="${entry.date}-${entry.dir}" style="border:1px solid #000;">
              <source src="${file.path}" type="video/mp4">
              </video>`;
          }
        }
        htmlString += '</ul></div></div>';

      }
      htmlString += '</div>'
      htmlString += '</div>'

      document.getElementById("main").innerHTML += htmlString;
      })()



    </script>
    -->

  </body>
</html>
